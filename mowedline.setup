;; -*- scheme -*-

(run (chicken -to-stdout -emit-all-import-libraries mowedline.scm >/dev/null))
(compile -s mowedline.scm
         -L "\"-L/usr/X11R6/lib -lX11\""
         -C "\"-I/usr/X11R6/include\""
         -prologue llog.import.scm
         -prologue mowedline.import.scm)

(compile -s mowedline.import.scm)

(compile -s llog.import.scm)

(compile mowedline-cli.scm -o mowedline)

(compile mowedline-client.scm)

(install-extension 'mowedline
  '("mowedline.so" "mowedline.import.so" "llog.import.so")
  '((version "0.2.7")))

(install-program 'mowedline
  '("mowedline" #;"mowedline-client")
  '((version "0.2.7")))
